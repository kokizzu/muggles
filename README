Quickstart (for typical 2-uplinks, serving 1 LAN case)
The setup

Assuming you have 3 ethernet cards on your gateway box.

eth0 faces your lan, and is 192.168.0.12 by default. eth1 is your uplink1, and is 192.168.11.12 by default. eth2 is your uplink2, and is 192.168.12.12 by default.

alan is one machine on the lan by default blan is another machine on the lan by default

In pictures:

     T H E   I N T E R N E T  
          |         |
        uplink1  uplink2
          |        |
         ______________
         | gatewaybox |
         --------------
               |
            lanlink
               |
        --------------------------
       |            |        |
     alan         blan

The install

The 8-fold path to a higher uplink state...

1. Install lenny with a minimal bunch of packages (no x needed).

2. Install nmap, lighttpd, incron iproute dnsmasq lighttpd sudo ntpdate and openntpd.

3. Unpack the tgz file in, say /root/muggles_source.

4. To install, run ./installscript.

5. Set the static ip addresses in /etc/network/interfaces to the static ips you are to use.

6. Change/add mac addresses of the lan machines to /etc/dnsmasq.conf (the dhcp-host= entries).

7. Connect up alan (or rather, its replacement). You already entered the mac address for this machine in step 5. If you have a normal modern OS, then it will simply auto-configure and get its network; dns and time settings from the muggles box. Then point your browser to http://192.168.0.12 (or whatever you've changed it to in step 6)

8. admire the pre-millennial web interface

If you're lucky, you have a basic muggles with web gui front end.

If you're unlucky or your setup is less simple, well, here are the details so you can fix things to taste: 



Not-so-quickstart:
==================

The Details
===========


Detailed documentation at:


http://code.google.com/p/muggles/wiki/PageName#Not-so-Quickstart_(for_if_you_want_more)


some loose ends, notes which will be migrated to the wiki url above:




14 logrotate
for if the /var/log/muggles files keep growing and you want to keep them. Or you can just cron remove them.

14. vbox
Test environment setup:

vboxmanage clonevdi alanclient.vdi dlanclient.vdi   (make sure alanclient.vdi is powered off)
vboxmanage registerimage disk dlanclient.vdi
vboxmanage createvm -name dlanclient

do a comparison between vboxmanage showvminfo dlanclient and vboxmanage showvminfo alanclient, and modify acordingly,
eg: vboxmanage modifyvm dlanclient -ostype Debian -memory 512MB

Problem: testing in a virtualbox with bridging - the host ips of machines on the lan end up being the bridge ip (IRL it *should* be the lan ips). This is due to the layer 2 nature of pcap. Fix with echo 0 > /proc/sys/net/bridge/bridge-nf-call-iptables and echo 0 > /proc/sys/net/bridge/bridge-nf-call-arptables

synopsis: cat /var/log/muggles/bamlog ; cat /var/log/muggles/connectivitylog; nmap -sP host (or ping host) ; cat /root/secupdates ;


